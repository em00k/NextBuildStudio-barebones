{
    "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
    "version": "1.0.0",
    "name": "NextBuild",
    "scopeName": "source.nextbuild",
    "fileTypes": ["nbld","nbl","bas"],
    "firstLineMatch": "^#!.*\\bnextbuild\\b",
  
    "patterns": [
      { "include": "#labels" },
      { "include": "#macros" },
      { "include": "#keywords" },
      { "include": "#strings" },
      { "include": "#comment" },
      { "include": "#numbers" },
      { "include": "#variables" },
      { "include": "#operators" },
      { "include": "#functions" },
      { "include": "#constants" },
      { "include": "#types" },
      { "include": "#nextlib" },
      { "include": "#multilineString" }
    ],
  
    "repository": {
      "labels": {
        "patterns": [
          {
            "name": "entity.name.label.nextbuild",
            "match": "^[A-Za-z_][A-Za-z0-9_]*:"
          }
        ]
      },
      "macros": {
        "patterns": [
          {
            "name": "keyword.preprocessor.nextbuild",
            "match": "^#\\w+"
          }
        ]
      },
      "multilineString": {
        "name": "string.quoted.multi.nextbuild",
        "begin": "'''",
        "end": "'''",
        "patterns": [
          {
            "name": "constant.character.escape.nextbuild",
            "match": "\\\\."
          }
        ]
      },
      "keywords": {
          "patterns": [{
                  "name": "keyword.control.nextbuild",
                  "match": "(?i:\\b(AS|BEEP|BIN|BORDER|FART|BRIGHT|CAT|CIRCLE|CLEAR|CLS|CONTINUE|COPY|DATA|DEF FN|DIM|DRAW|ERASE|FLASH|FOR|GO SUB|GO TO|IF|INK|INPUT|INVERSE|LET|LIST|NEXT|ON|OUT|OVER|PAPER|PAUSE|PLOT|POKE|PRINT|RANDOMIZE|READ|RESTORE|RETURN|RUN|AT|LINE|STEP|TAB|THEN|TO|STOP|DO|ELSE|ELSEIF|END|EXIT|FUNCTION|GOTO|GOSUB|LOOP|WEND|WHILE|BOLD|ByRef|ByVal|CONST|DECLARE|FastCall|ITALIC|StdCall|SUB|UNTIL|TO|endif|end if|asm|end asm)\\b)"
              },
              {
                  "name": "keyword.operator.logical.nextbuild",
                  "match": "(?i:\\b(AND|NOT|OR|bAND|bNOT|bOR|bXOR|MOD|SHL|SHR|XOR)\\b)"
              },
              {
                  "name": "entity.name.function.nextbuild",
                  "match": "(?i:\\b(ABS|ACS|ASN|ATN|ATTR|CHR$|CODE|COS|EXP|FN|INKEY$|INT|IN|LEN|LN|PEEK|PI|POINT|RND|SCREEN$|SGN|SIN|SQR|STR$|TAN|USR|VAL$|VAL|ASC|CAST|CHR|CSRLIN|HEX|HEX16|GetKey|MultiKeys|GetKeyScanCode|LBOUND|LCase|STR|POS|SCREEN|UCase)\\b)"
              },
              {
                  "name": "entity.name.type.nextbuild",
                  "match": "(?i:\\b(byte|ubyte|integer|uinteger|long|ulong|string|fixed|float)\\b)"
              },
              {
                  "name": "comment.line.nextbuild",
                  "match": "(?i:(\\bREM\\b|'|; ).*)"
              },
              {
                  "name": "comment.block.nextbuild",
                  "begin": "/'",
                  "end": "'/"
              },
              {
                  "name": "variable.name.nextbuild",
                  "match": "\\b[A-Za-z_](\\$|[A-Za-z0-9_]*)"
              },
              {
                  "name": "constant.numeric.nextbuild",
                  "match": "-?\\b((([0-9]+\\.?[0-9]*)|(\\.[0-9]+))((e|E)(\\+|-)?[0-9]+)?)(L|l|UL|ul|u|U|F|f)?|(\\$[a-zA-Z0-9]+)|(@[0|1]+)\\b"
              },
              {
                  "match": "&|\\*|\\-|\\+|=|<>|<|>|\\|\\^|<<|>>|~",
                  "name": "keyword.operator.arithmetic.nextbuild"
              },
              {
                  "match": "(?i:\\b(InitLayer2|InitSprites|InitSprites2|LoadBMP|LoadBMPOld|LoadSDBank|LoadSD|SaveSD|DoTileBank16|DoTile8|DoTileBank8|DoTileBank8Test|DrawImage|Cls256|Cls320|ClearLayer2|ShowSprites|WaitKey|InitLayer2|InitPalette)\\b)",
                  "name": "keyword.operator.nextlib.nextbuild"
              }
          ]
      },
      "strings": {
          "name": "string.quoted.double.nextbuild",
          "begin": "\"",
          "end": "\"",
          "patterns": [{
              "name": "constant.character.escape.nextbuild",
              "match": "\\\\."
          }]

    }
    },
    "injectionSelector": "L:markdown -comment",
    "injections": {
      "source.fenced_code.block.markdown": {
        "patterns": [
          { "include": "source.nextbuild" }
        ]
      }
    }
}
