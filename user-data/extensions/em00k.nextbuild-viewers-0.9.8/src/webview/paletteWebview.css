body {
    padding: 10px; /* Match sprite viewer */
    font-family: var(--vscode-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif);
    background-color: var(--vscode-editor-background);
    color: var(--vscode-editor-foreground);
    font-size: var(--vscode-font-size);
    max-width: 900px; /* Match sprite viewer */
    margin: 0 auto; /* Match sprite viewer */
    zoom: 1; /* Default zoom level */
    transform-origin: top center; /* Scale from top center */
}
h1 {
    font-size: 1.1em;
    margin-bottom: 0.5em; /* Match sprite viewer */
    color: var(--vscode-textLink-foreground);
    font-weight: 600; /* Match sprite viewer */
}
.toolbar {
    display: flex;
    flex-wrap: wrap;
    margin: 0 auto;
    
    gap: 10px;
    padding: 2px;
    background-color: var(--vscode-sideBar-background);
    border-radius: 4px;
    margin-bottom: 4px;
    border: 1px solid var(--vscode-sideBar-border, transparent);
}
.file-info {
    font-size: 0.9em;
    color: var(--vscode-descriptionForeground);
    font-weight: 500;
}
.palette-container {
    display: grid;
    grid-template-columns: repeat(16, max-content); /* Match sprite grid concept */
    gap: 1px; /* Reduced gap */
    margin-bottom: 15px;
    justify-content: center; /* Center the grid */
}
.color-box {
    width: 20px; /* Reduced size */
    height: 20px; /* Reduced size */
    border: none; /* Remove border initially */
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    align-items: center;
    padding: 2px; /* Match sprite box */
    border-radius: 3px; /* Match sprite box */
    cursor: pointer; 
    position: relative; 
    transition: background-color 0.1s; /* Match sprite box */
}
.color-box:hover {
    background-color: rgba(0, 120, 215, 0.1); /* Match sprite box hover */
}
.color-box.selected {
    background-color: rgba(215, 211, 0, 0.2);
    outline: 2px solid rgba(255, 238, 0, 0.863); /* Add subtle outline */
}

/* Secondary selection indicator (right-click selection) */
.color-box.secondary-selected {
    outline: 2px dashed rgba(255, 165, 0, 0.8); /* Orange dashed outline */
    z-index: 1; /* Make sure it shows above other boxes */
}

/* Allow both primary and secondary selections to be visible together */
.color-box.selected.secondary-selected {
    outline: 2px dashed rgba(255, 165, 0, 0.8);
    background-color: rgba(0, 120, 215, 0.2);
    box-shadow: 0 0 0 1px rgba(0, 120, 215, 0.5);
}

.color-index {
    background-color: rgba(0, 0, 0, 0.6);
    color: white;
    padding: 1px 3px; /* Adjust padding */
    border-radius: 3px;
    font-size: 9px; 
}
.info {
    margin-top: 20px;
    font-size: 11px;
    color: var(--vscode-descriptionForeground);
    text-align: center;
    border-top: 1px solid var(--vscode-editorWidget-border, transparent);
    padding-top: 10px;
}
.main-layout {
    display: flex;
    gap: 20px; 
    align-items: flex-start; 
    justify-content: center; /* Center items */
}
.palette-grid-container {
    flex-shrink: 0;
}
.editor-panel {
    flex-grow: 0; /* Don't allow grow */
    flex-shrink: 0; /* Don't allow shrink */
    width: 220px; /* Give it a fixed width */
    padding: 10px;
    border-radius: 5px;

    display: flex;
    flex-direction: column;
    gap: 10px; 
}
.editor-panel h4 {
    margin-top: 0;
    margin-bottom: 10px; /* More space below title */
    text-align: center;
    color: var(--vscode-textLink-foreground);
    font-size: 1em; 
    font-weight: 600;
}
.picker-controls {
    display: flex;
    flex-direction: column;
    gap: 5px; 
    background-color: transparent; /* Blend with body */
}

/* --- Picker Preview Styles --- */
.picker-preview {
    display: flex;
    flex-direction: column; /* Stack box and hex vertically */
    align-items: center; /* Center horizontally */
    gap: 5px; /* Space between box and hex */
    margin-top: 10px; /* Space above the preview */
    margin-bottom: 10px; /* Space below the preview */
}

.preview-box {
    width: 50px; /* Give the box a size */
    height: 50px;
    border: 1px solid var(--vscode-input-border); /* Add a border */
    border-radius: 3px;
    
}

#previewHex {
    font-size: 11px; /* Smaller font for hex */
    color: var(--vscode-descriptionForeground);
}

/* Style the container for the secondary palette */
#secondary-palette-container {
    display: grid;
    grid-template-columns: repeat(16, max-content); /* Match sprite grid concept */
    gap: 5px; /* Space between color boxes */
    margin-top: 10px; /* Space above the palette */
    padding: 5px; /* Inner padding */
    background-color: var(--vscode-input-background); /* Subtle background */
    border-radius: 3px;
    min-height: 30px; /* Ensure it has some height even when empty */
}

.secondary-palette-container .color-box {
    width: 20px; /* Reduced size */
    height: 20px; /* Reduced size */
    border: none; /* Remove border initially */
    display: flex; /* Arrange items horizontally */
    flex-wrap: wrap; /* Allow wrapping */
}

.color-box.secondary.selected {
    background-color: rgba(0, 120, 215, 0.2);
    outline: 1px solid rgba(0, 120, 215, 0.5);
}

/* --- Byte Input Styles --- */
.byte-inputs {
    display: flex;
    flex-direction: column; /* Stack labels/inputs vertically */
    gap: 5px;
    margin-bottom: 10px; /* Space below byte inputs */
}

.byte-group {
    display: flex;
    align-items: center;
    gap: 5px;
}

.byte-group label {
    font-size: 11px;
    color: var(--vscode-input-placeholderForeground);
    width: 100px; /* Align labels */
    text-align: right;
}

.byte-input {
     font-family: var(--vscode-editor-font-family, monospace); /* Monospace for hex */
     font-size: 11px;
     padding: 2px 4px;
     border-radius: 3px;
     border: 1px solid var(--vscode-input-border);
     background-color: var(--vscode-input-background);
     color: var(--vscode-input-foreground);
     width: 30px; /* Fixed width */
     text-align: center;
}

.editor-panel .slider-group {
    display: flex;
    align-items: center;
    gap: 8px; 
}
.editor-panel .slider-group label {
    width: 15px; 
    font-weight: 500;
    font-size: 11px;
    color: var(--vscode-input-placeholderForeground);
}
.editor-panel .slider-group input[type="range"] {
    flex-grow: 1;
    cursor: pointer;
    height: 4px;
    background: var(--vscode-input-background);
    border-radius: 2px;
    border: 1px solid var(--vscode-input-border);
    appearance: none ; 
    outline: none;
    transition: background 0.15s ease-in-out;
}
.editor-panel .slider-group input[type="range"]:focus {
    background: var(--vscode-inputOption-activeBackground);
}
.editor-panel .slider-group input[type="range"]::-webkit-slider-thumb {
     appearance: none;
     width: 12px;
     height: 12px;
     background: var(--vscode-button-background);
     border-radius: 50%;
     cursor: pointer;
     border: 1px solid var(--vscode-button-border, var(--vscode-input-border)); 
     transition: background 0.15s ease-in-out;
}
.editor-panel .slider-group input[type="range"]::-webkit-slider-thumb:hover {
     background: var(--vscode-button-hoverBackground);
}
.editor-panel .slider-group input[type="range"]::-moz-range-thumb {
     width: 12px;
     height: 12px;
     background: var(--vscode-button-background);
     border-radius: 50%;
     cursor: pointer;
     border: 1px solid var(--vscode-button-border, var(--vscode-input-border));
     transition: background 0.15s ease-in-out;
}
.editor-panel .slider-group input[type="range"]::-moz-range-thumb:hover {
     background: var(--vscode-button-hoverBackground);
}

/* Copied from spriteWebview for consistency */
.control-group {
    display: flex;
    align-items: center;
    gap: 5px;
}

/* --- Button Styles (copied from blockWebview) --- */
button {
    background-color: var(--vscode-button-background);
    color: var(--vscode-button-foreground);
    border: 1px solid var(--vscode-button-border, transparent);
    cursor: pointer;
    padding: 3px 8px; /* Add some padding */
    border-radius: 3px; /* Match other controls */
    font-size: 12px; /* Match other controls */
}
button:hover {
    background-color: var(--vscode-button-hoverBackground);
}

/* --- Palette Hover Info Styles --- */
.hover-info-container {
    margin-top: 15px;
    padding: 8px 12px;
    background-color: var(--vscode-editorWidget-background);
    border: 1px solid var(--vscode-editorWidget-border, transparent);
    border-radius: 4px;
    display: flex; /* Always displayed as flex */
    flex-direction: column;
    gap: 4px;
    font-size: 11px;
    min-height: 20px;
    color: var(--vscode-editorWidget-foreground);
    width: fit-content;
    margin-left: auto;
    margin-right: auto;
}

#hoverPreviewBox { /* Style the preview box inside hover */
    width: 16px;
    height: 16px;
    border: 1px solid var(--vscode-inputOption-activeBorder);
    flex-shrink: 0; /* Prevent shrinking */
}

.hover-info-container span { /* Style for the labels/values */
    font-family: var(--vscode-editor-font-family, monospace);
}

.hover-info-container span strong { /* Style for labels like "Index:" */
    color: var(--vscode-descriptionForeground);
    margin-right: 4px;
}

/* Fixed width for hover values if needed */
.hover-info-container span span { /* Target the inner spans holding the values */
    display: inline-block; /* Allow width setting */
    text-align: left;  /* Align text within the span */
    min-width: 45px; /* Adjust as needed - enough for #RRGGBB */
}

.hover-info-container span #hoverPaletteIndex,
.hover-info-container span #hoverR9Value, /* Added R9, G9, B9 */
.hover-info-container span #hoverG9Value,
.hover-info-container span #hoverB9Value {
     min-width: 15px; /* Shorter width for numerical indices */
}

.hover-info-container span #hoverPriorityValue {
    min-width: 30px; /* Width for true/false */
}

.hover-info-container span #hoverByte1,
.hover-info-container span #hoverByte2 {
    min-width: 20px; /* Width for byte values */
}
/* --- End Palette Hover Info Styles --- */

.toolbar-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    justify-content: center;
}

.separator {
    display: inline-block;
    width: 1px;
    height: 24px;
    background-color: var(--vscode-editorWidget-border, #545454);
    margin: 0 5px;
    opacity: 0.6;
}

.copy-section-controls {
    display: flex;
    flex-wrap: nowrap;
    gap: 3px;
    border: 1px solid var(--vscode-button-secondaryBorder, rgba(255, 255, 255, 0.1));
    border-radius: 4px;
    padding: 2px;
    background-color: var(--vscode-button-secondaryBackground, rgba(60, 60, 60, 0.2));
}

.copy-section-controls button {
    font-size: 0.85em;
    padding: 2px 4px;
    background-color: var(--vscode-button-background);
}

#saveChangesButton {
    background-color: var(--vscode-button-background);
}
#saveChangesButton-disabled {
    background-color: var(--vscode-button-secondaryBackground);
}

/* Style for saveChangesButton when document is dirty */
#saveChangesButton.save-button-dirty {
    background-color: var(--vscode-button-background);
    border: 1px solid var(--vscode-errorForeground);
    color: var(--vscode-errorForeground); /* Red text for emphasis */
}

#saveChangesButton.save-button-dirty:hover {
    background-color: var(--vscode-button-hoverBackground);
}

/* Highlight buttons when active */
.copy-section-controls button.active {
    background-color: var(--vscode-button-hoverBackground, #3794ff);
    box-shadow: 0 0 0 1px var(--vscode-focusBorder, #007fd4) inset;
}

/* Import dialog styles */
.import-dialog {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    justify-content: center;
    align-items: center;
}

.import-dialog-content {
    background-color: var(--vscode-editor-background);
    padding: 20px;
    border-radius: 6px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    width: 80%;
    max-width: 700px;
    /* max-height: 80vh; */
    overflow-y: auto;
}

.import-dialog h2 {
    margin-top: 0;
    margin-bottom: 15px;
    font-size: 1.2em;
    color: var(--vscode-editor-foreground);
}

.import-dialog-buttons {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 20px;
}

.import-preview {
    display: grid;
    grid-template-columns: repeat(16, minmax(10px, 1fr));
    gap: 1px;
    margin: 10px 0;
    border: 1px solid var(--vscode-input-border);
    padding: 5px;
    border-radius: 3px;
    background-color: var(--vscode-input-background);
    max-width: 60%;
    margin-left: auto;
    margin-right: auto;
}

.import-preview .preview-color {
    width: 100%;
    aspect-ratio: 1/1;
    border-radius: 2px;
}

.import-preview .preview-color.clickable {
    cursor: pointer;
    transition: transform 0.1s ease-in-out;
}

.import-preview .preview-color.clickable:hover {
    transform: scale(1.1);
    box-shadow: 0 0 3px rgba(255, 255, 255, 0.3);
    z-index: 1;
}

.import-options {
    margin: 15px 0;
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.import-option-row {
    display: flex;
    align-items: center;
    gap: 10px;
}

.import-option-row label {
    min-width: 100px;
}

.import-option-row select, 
.import-option-row input {
    flex: 1;
    background-color: var(--vscode-input-background);
    color: var(--vscode-input-foreground);
    border: 1px solid var(--vscode-input-border);
    padding: 4px 8px;
    border-radius: 2px;
}

.import-info {
    margin-top: 15px;
    padding: 10px;
    background-color: var(--vscode-editorWidget-background);
    border-radius: 3px;
    font-size: 0.9em;
    color: var(--vscode-descriptionForeground);
}

/* Priority bit visualization */
.color-box.priority-bit-active {
    position: relative;
}

.color-box.priority-bit-active::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: linear-gradient(45deg, transparent calc(50% - 1px), rgba(255,255,255,0.5) calc(50% - 1px), rgba(255,255,255,0.5) calc(50% + 1px), transparent calc(50% + 1px));
    pointer-events: none;
}

/* Ctrl+LMB Drag and Swap Styles */
.color-box.ctrl-dragging {
    outline: 2px solid var(--vscode-focusBorder);
    outline-offset: -1px;
    box-shadow: 0 0 5px var(--vscode-focusBorder);
    position: relative;
    z-index: 10;
    cursor: move;
}

.color-box.swap-target {
    outline: 2px dashed var(--vscode-focusBorder);
    outline-offset: -1px;
    background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.1) 25%, transparent 25%, 
                      transparent 50%, rgba(255, 255, 255, 0.1) 50%, 
                      rgba(255, 255, 255, 0.1) 75%, transparent 75%, transparent);
    background-size: 6px 6px;
    cursor: copy;
}

/* Add a special cursor for color swatches when Ctrl is pressed */
.color-box.ctrl-hover {
    cursor: move;
}

.color-swap-notification {
    position: fixed;
    padding: 5px 10px;
    background-color: var(--vscode-editor-background);
    color: var(--vscode-editor-foreground);
    border-radius: 3px;
    border: 1px solid var(--vscode-widget-border);
    font-size: 12px;
    pointer-events: none;
    z-index: 1000;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
}

/* Advanced operations panel */
.advanced-operations {
    margin-top: 20px;
    border-radius: 3px;
    border-top: 1px solid var(--vscode-editorWidget-border, transparent);
    padding-top: 15px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.advanced-operations h3 {
    font-size: 1em;
    margin-top: 0;
    margin-bottom: 10px;
    color: var(--vscode-textLink-foreground);
}

.operations-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: 10px;
    margin-bottom: 15px;
}

.operation-button {
    background-color: var(--vscode-button-background);
    color: var(--vscode-button-foreground);
    border: 1px solid var(--vscode-button-border, transparent);
    padding: 5px 8px;
    border-radius: 3px;
    cursor: pointer;
    font-size: 12px;
    text-align: center;
    transition: background-color 0.2s;
}

.operation-button:hover {
    background-color: var(--vscode-button-hoverBackground);
}

/* Dialog for advanced operations */
.operation-dialog {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    justify-content: center;
    align-items: center;
}

.operation-dialog-content {
    background-color: var(--vscode-editor-background);
    padding: 20px;
    border-radius: 6px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    width: 80%;
    max-width: 500px;
}

.operation-dialog h2 {
    margin-top: 0;
    margin-bottom: 15px;
    font-size: 1.2em;
    color: var(--vscode-editor-foreground);
}

.operation-dialog-buttons {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 20px;
}

.operation-form {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.operation-form-row {
    display: flex;
    align-items: center;
    gap: 10px;
}

.operation-form-row label {
    min-width: 120px;
}

.operation-form-row select,
.operation-form-row input {
    flex: 1;
    background-color: var(--vscode-input-background);
    color: var(--vscode-input-foreground);
    border: 1px solid var(--vscode-input-border);
    padding: 4px 8px;
    border-radius: 2px;
}

/* Color preview for gradients and harmonies */
.color-preview-grid {
    display: grid;
    grid-template-columns: repeat(8, 1fr);
    gap: 4px;
    margin: 10px 0;
}

.color-preview {
    aspect-ratio: 1/1;
    border-radius: 2px;
    border: 1px solid var(--vscode-input-border);
}

/* History controls */
.history-controls {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
}

.history-controls button {
    padding: 3px 8px;
    font-size: 11px;
}

/* Selection indicators for copy functionality */
.color-box.copy-start {
    box-shadow: 0 0 0 2px var(--vscode-editor-selectionBackground, #264f78) inset;
    z-index: 2;
}

.color-box.copy-end {
    box-shadow: 0 0 0 2px var(--vscode-editor-selectionBackground, #264f78) inset;
    z-index: 2;
}

.color-box.copy-range {
    background-image: linear-gradient(45deg, 
        rgba(0, 0, 0, 0) 0%, 
        rgba(0, 0, 0, 0) 45%, 
        rgba(255, 255, 255, 0.2) 50%, 
        rgba(0, 0, 0, 0) 55%, 
        rgba(0, 0, 0, 0) 100%);
    background-size: 10px 10px;
    border: 1px dashed var(--vscode-editor-selectionBackground, #264f78);
}


.color-box.copy-start-selected {
  outline: 2px solid #afa259; /* A gold-like outline */
  outline-offset: -2px;
  box-shadow: 0 0 8px #FFD700;
}